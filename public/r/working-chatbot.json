{
  "name": "working-chatbot",
  "categories": [
    "chatbot",
    "ai"
  ],
  "description": "A working chatbot UI component with a sleek design and chat functionality. Used for chatbot interfaces, AI assistants, etc.",
  "type": "registry:block",
  "dependencies": [
    "lucide-react",
    "react",
    "react-markdown",
    "sonner"
  ],
  "registryDependencies": [
    "https://blocks.mvp-subha.me/r/utils.json",
    "https://blocks.mvp-subha.me/r/textarea.json",
    "https://blocks.mvp-subha.me/r/use-auto-resize-textarea.json"
  ],
  "files": [
    {
      "type": "registry:block",
      "content": "'use client';\r\n\r\nimport { Bot, Copy, CornerRightUp, Sparkles } from 'lucide-react';\r\nimport { useCallback, useMemo, useRef, useState } from 'react';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { cn } from '@/lib/utils';\r\nimport { useAutoResizeTextarea } from '@/hooks/use-auto-resize-textarea';\r\nimport { useChat } from '@ai-sdk/react';\r\nimport Markdown from 'react-markdown';\r\nimport { toast } from 'sonner';\r\nimport { DefaultChatTransport } from 'ai';\r\n\r\nfunction AiInput({\r\n  value,\r\n  onChange,\r\n  onSubmit,\r\n  onKeyDown,\r\n}: {\r\n  value: string;\r\n  onChange: (e: React.ChangeEvent<HTMLTextAreaElement>) => void;\r\n  onSubmit: () => void;\r\n  onKeyDown: (e: React.KeyboardEvent<HTMLTextAreaElement>) => void;\r\n}) {\r\n  const { textareaRef, adjustHeight } = useAutoResizeTextarea({\r\n    minHeight: 50,\r\n    maxHeight: 200,\r\n  });\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <div className=\"relative mx-auto flex w-full max-w-4xl flex-col items-start gap-2\">\r\n        <div className=\"relative mx-auto w-full max-w-4xl\">\r\n          <Textarea\r\n            ref={textareaRef}\r\n            id=\"ai-input-06\"\r\n            placeholder=\"Ask me anything!\"\r\n            className={cn(\r\n              'bg-muted/50 text-foreground ring-primary/20 placeholder:text-muted-foreground/70 w-full max-w-4xl resize-none rounded-3xl border-none py-4 pr-12 pl-6 leading-[1.2] text-wrap',\r\n              'focus:ring-primary/30 min-h-[56px] transition-all duration-200 focus:ring-2',\r\n            )}\r\n            value={value}\r\n            onKeyDown={onKeyDown}\r\n            onChange={(e) => {\r\n              onChange(e);\r\n              adjustHeight();\r\n            }}\r\n          />\r\n          <button\r\n            onClick={onSubmit}\r\n            className={cn(\r\n              'bg-primary/10 hover:bg-primary/20 absolute top-1/2 right-3 -translate-y-1/2 rounded-xl p-2 transition-all duration-200',\r\n              value.trim() ? 'opacity-100' : 'cursor-not-allowed opacity-50',\r\n            )}\r\n            type=\"button\"\r\n            disabled={!value.trim()}\r\n          >\r\n            <CornerRightUp\r\n              className={cn(\r\n                'text-primary h-4 w-4 transition-opacity',\r\n                value ? 'opacity-100' : 'opacity-50',\r\n              )}\r\n            />\r\n          </button>\r\n        </div>\r\n        <p className=\"text-muted-foreground ml-4 text-xs\">\r\n          {value.length}/2000 characters\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function WorkingChatbot() {\r\n  const [responseTimes, setResponseTimes] = useState<Record<string, number>>(\r\n    {},\r\n  );\r\n  const [input, setInput] = useState('');\r\n  const startTimeRef = useRef<number>(0);\r\n  // Using theme for styling is handled by Tailwind's dark mode classes\r\n\r\n  const transport = useMemo(\r\n    () =>\r\n      new DefaultChatTransport({\r\n        api: '/api/demo-chat',\r\n      }),\r\n    [],\r\n  );\r\n\r\n  const { messages, status, error, sendMessage } = useChat({\r\n    transport,\r\n    onFinish: ({ message }) => {\r\n      const duration = (Date.now() - startTimeRef.current) / 1000;\r\n      setResponseTimes((prev) => ({ ...prev, [message.id]: duration }));\r\n    },\r\n  });\r\n\r\n  // Check if the AI is currently generating a response\r\n  const isLoading = status === 'submitted' || status === 'streaming';\r\n\r\n  const handleSubmit = useCallback(\r\n    (e?: React.FormEvent) => {\r\n      e?.preventDefault();\r\n      if (!input.trim()) return;\r\n      startTimeRef.current = Date.now();\r\n      sendMessage({ parts: [{ type: 'text', text: input.trim() }] });\r\n      setInput('');\r\n    },\r\n    [input, sendMessage, setInput],\r\n  );\r\n\r\n  const handleKeyDown = useCallback(\r\n    (event: React.KeyboardEvent<HTMLTextAreaElement>) => {\r\n      if (event.key === 'Enter' && !event.shiftKey) {\r\n        event.preventDefault();\r\n        handleSubmit();\r\n      }\r\n    },\r\n    [handleSubmit],\r\n  );\r\n\r\n  return (\r\n    <div className=\"mx-auto flex h-svh w-full max-w-4xl flex-col pb-0.5\">\r\n      <div className=\"border-primary/20 bg-card/40 text-card-foreground h-full flex-1 overflow-y-auto rounded-xl border p-4 text-sm leading-6 shadow-md sm:text-base sm:leading-7\">\r\n        {messages.length > 0 ? (\r\n          messages.map((m) => {\r\n            return (\r\n              <div key={m.id} className=\"mb-4 whitespace-pre-wrap\">\r\n                {m.role === 'user' ? (\r\n                  <div className=\"flex flex-row px-2 py-4 sm:px-4\">\r\n                    <img\r\n                      alt=\"user\"\r\n                      className=\"mr-2 flex size-6 rounded-full sm:mr-4 md:size-8\"\r\n                      src=\"https://i.postimg.cc/j5dW4vFd/Mvpblocks.webp\"\r\n                      width={32}\r\n                      height={32}\r\n                    />\r\n                    <div className=\"flex max-w-3xl items-center\">\r\n                      <p>\r\n                        {m.parts.map((part) =>\r\n                          part.type === 'text' ? part.text : null,\r\n                        )}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"relative mb-4 flex rounded-xl bg-neutral-50 px-2 py-6 sm:px-4 dark:bg-neutral-900\">\r\n                    <Bot className=\"bg-secondary text-primary mr-2 flex size-8 rounded-full p-1 sm:mr-4\" />{' '}\r\n                    <div className=\"markdown-body w-full max-w-3xl overflow-x-auto rounded-xl\">\r\n                      <Markdown>\r\n                        {m.parts\r\n                          .map((part) =>\r\n                            part.type === 'text' ? part.text : '',\r\n                          )\r\n                          .join('')}\r\n                      </Markdown>\r\n                      {responseTimes[m.id] && (\r\n                        <div className=\"mt-2 text-xs text-neutral-500\">\r\n                          Response time: {responseTimes[m.id].toFixed(3)}s\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    <button\r\n                      type=\"button\"\r\n                      title=\"copy\"\r\n                      className=\"absolute top-2 right-2 rounded-full bg-rose-500 p-1 opacity-50 transition-all hover:opacity-75 active:scale-95 dark:bg-neutral-800\"\r\n                      onClick={() => {\r\n                        const textContent = m.parts\r\n                          .filter((part) => part.type === 'text')\r\n                          .join('');\r\n                        navigator.clipboard.writeText(textContent);\r\n                        toast.success('Copied to clipboard');\r\n                      }}\r\n                    >\r\n                      <Copy className=\"h-4 w-4 text-white\" />\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <div className=\"flex h-full flex-col items-center justify-center\">\r\n            <p className=\"text-muted-foreground mx-auto px-2 text-center text-xl font-semibold tracking-wide md:text-2xl\">\r\n              Start Chatting with\r\n              <br />\r\n              <span className=\"text-primary text-2xl font-bold md:text-4xl\">\r\n                MVPBlocks\r\n              </span>\r\n              <span className=\"text-primary\">.AI</span>\r\n            </p>\r\n            <div className=\"group relative mt-6\">\r\n              <div className=\"from-primary/30 to-primary/10 absolute -inset-1 rounded-full bg-gradient-to-r opacity-75 blur-md transition-opacity duration-500 group-hover:opacity-100\"></div>\r\n              <img\r\n                src=\"/assets/robo.svg\"\r\n                alt=\"AI Assistant\"\r\n                width={250}\r\n                height={250}\r\n                className=\"relative transition-all duration-500 hover:scale-105 active:scale-95\"\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n        {isLoading && (\r\n          <div className=\"bg-primary/5 mx-auto flex w-fit items-center gap-2 rounded-full px-4 py-2\">\r\n            <Sparkles className=\"text-primary h-4 w-4 animate-pulse\" />\r\n            <span className=\"from-primary/80 to-primary animate-pulse bg-gradient-to-r bg-clip-text text-sm font-medium text-transparent\">\r\n              Generating response...\r\n            </span>\r\n          </div>\r\n        )}\r\n        {error && (\r\n          <div className=\"border-destructive/20 bg-destructive/10 text-destructive mx-auto w-fit rounded-lg border p-3\">\r\n            Something went wrong! Please try again.\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <form className=\"mt-2\" onSubmit={handleSubmit}>\r\n        <div className=\"relative\">\r\n          <AiInput\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onSubmit={handleSubmit}\r\n            onKeyDown={handleKeyDown}\r\n          />\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n",
      "path": "/components/mvpblocks/chatbot-ui/working-chatbot.tsx",
      "target": "components/mvpblocks/working-chatbot.tsx"
    }
  ]
}