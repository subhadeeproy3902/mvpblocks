{
  "name": "bubble-board",
  "author": "Ecolash",
  "type": "registry:block",
  "description": "Draggable bubble grid with smooth Framer Motion animations",
  "dependencies": [
    "framer-motion"
  ],
  "registryDependencies": [],
  "files": [
    {
      "type": "registry:block",
      "content": "\"use client\"\r\n\r\nimport { useCallback, useEffect, useMemo, useRef } from 'react';\r\nimport { motion, useMotionValue, transform } from \"framer-motion\"\r\n\r\nconst ICON_CONFIG = {\r\n  margin: 20,\r\n  size: 100,\r\n}\r\n\r\nconst CONTAINER_CONFIG = {\r\n  width: 420,\r\n  height: 420,\r\n}\r\n\r\nconst GRID_SIZE = 10\r\nconst COLS = 12\r\n\r\nfunction useIconTransform({ x, y, scale, planeX, planeY, xOffset, yOffset, }: {\r\n  x: any\r\n  y: any\r\n  scale: any\r\n  planeX: any\r\n  planeY: any\r\n  xOffset: number\r\n  yOffset: number\r\n}) {\r\n  const xScale = useRef(1)\r\n  const yScale = useRef(1)\r\n  const createScreenRange = (axis: \"width\" | \"height\") => [\r\n    -60,\r\n    80,\r\n    CONTAINER_CONFIG[axis] - (ICON_CONFIG.size + ICON_CONFIG.margin) / 2 - 80,\r\n    CONTAINER_CONFIG[axis] - (ICON_CONFIG.size + ICON_CONFIG.margin) / 2 + 60,\r\n  ]\r\n\r\n  const xRange = createScreenRange(\"width\")\r\n  const yRange = createScreenRange(\"height\")\r\n\r\n  const mapScreenToXOffset = transform(xRange, [50, 0, 0, -50])\r\n  const mapScreenToYOffset = transform(yRange, [50, 0, 0, -50])\r\n  const mapScreenXToScale = transform(xRange, [0, 1, 1, 0])\r\n  const mapScreenYToScale = transform(yRange, [0, 1, 1, 0])\r\n\r\n  const updateScale = useCallback(() => {\r\n    const newScale = Math.min(xScale.current, yScale.current)\r\n    scale.set(newScale)\r\n  }, [scale])\r\n\r\n  useEffect(() => {\r\n    // Calculate initial position\r\n    const initialX = planeX.get() + xOffset + 20\r\n    xScale.current = mapScreenXToScale(initialX)\r\n    x.set(mapScreenToXOffset(initialX))\r\n    \r\n    return planeX.onChange((v: number) => {\r\n      const screen = v + xOffset + 20\r\n      xScale.current = mapScreenXToScale(screen)\r\n\r\n      x.set(mapScreenToXOffset(screen))\r\n      updateScale()\r\n    })\r\n  }, [planeX, x, scale, xOffset, mapScreenXToScale, mapScreenToXOffset, updateScale])\r\n\r\n  useEffect(() => {\r\n    // Calculate initial position\r\n    const initialY = planeY.get() + yOffset + 20\r\n    yScale.current = mapScreenYToScale(initialY)\r\n    y.set(mapScreenToYOffset(initialY))\r\n    \r\n    return planeY.onChange((v: number) => {\r\n      const screen = v + yOffset + 20\r\n      yScale.current = mapScreenYToScale(screen)\r\n\r\n      y.set(mapScreenToYOffset(screen))\r\n      updateScale()\r\n    })\r\n  }, [planeY, y, scale, yOffset, mapScreenYToScale, mapScreenToYOffset, updateScale])\r\n\r\n  // Initial scale update\r\n  useEffect(() => {\r\n    updateScale()\r\n  }, [updateScale])\r\n}\r\n\r\nfunction BubbleItem({ row, col, planeX, planeY, colorIndex, }: {\r\n  row: number\r\n  col: number\r\n  planeX: any\r\n  planeY: any\r\n  colorIndex: number\r\n}) {\r\n  const x = useMotionValue(0)\r\n  const y = useMotionValue(0)\r\n  const scale = useMotionValue(1)\r\n\r\n  const length = ICON_CONFIG.size + ICON_CONFIG.margin\r\n  const xOffset = col * length + (row % 2) * (length / 2)\r\n  const yOffset = row * ICON_CONFIG.size\r\n\r\n  useIconTransform({ x, y, scale, planeX, planeY, xOffset, yOffset })\r\n\r\n  const colors = [\"bg-chart-1\", \"bg-chart-2\", \"bg-chart-3\", \"bg-chart-4\", \"bg-chart-5\"]\r\n  const colorClass = colors[colorIndex % colors.length]\r\n  return (\r\n    <motion.div\r\n      style={{\r\n        position: \"absolute\",\r\n        left: xOffset,\r\n        top: yOffset,\r\n        x,\r\n        y,\r\n        scale,\r\n        width: ICON_CONFIG.size,\r\n        height: ICON_CONFIG.size,\r\n      }}\r\n      className={`rounded-full ${colorClass} shadow-lg`}\r\n    />\r\n  )\r\n}\r\n\r\nexport default function BubbleBoard() {\r\n  const GRID_SIZE_PX = 1000;\r\n  const DEVICE_SIZE = CONTAINER_CONFIG.width;\r\n\r\n  const initialOffset = -(GRID_SIZE_PX - DEVICE_SIZE) / 2;\r\n  const x = useMotionValue(initialOffset);\r\n  const y = useMotionValue(initialOffset);\r\n\r\n  const grid = useMemo(() => {\r\n    return new Array(GRID_SIZE).fill(null).map((_, i) => new Array(COLS).fill(null).map((_, j) => j))\r\n  }, [])\r\n\r\n  return (\r\n    <div\r\n      className=\"relative overflow-hidden rounded-3xl m-8\"\r\n      style={{\r\n        width: CONTAINER_CONFIG.width,\r\n        height: CONTAINER_CONFIG.height,\r\n        boxShadow: \"inset 0 0 50px 0px hsl(var(--foreground) / 30%)\",\r\n      }}\r\n    >\r\n\r\n      <motion.div\r\n        drag\r\n        dragConstraints={{\r\n          left: -650,\r\n          right: 50,\r\n          top: -600,\r\n          bottom: 50,\r\n        }}\r\n        style={{\r\n          width: 1000,\r\n          height: 1000,\r\n          x,\r\n          y,\r\n          background: \"transparent\",\r\n        }}\r\n        className=\"cursor-grab active:cursor-grabbing\"\r\n      >\r\n        {grid.map((rows, rowIndex) =>\r\n          rows.map((colIndex) => (\r\n            <BubbleItem\r\n              key={`${rowIndex}-${colIndex}`}\r\n              row={rowIndex}\r\n              col={colIndex}\r\n              planeX={x}\r\n              planeY={y}\r\n              colorIndex={rowIndex * COLS + colIndex}\r\n            />\r\n          )),\r\n        )}\r\n      </motion.div>\r\n    </div>\r\n  )\r\n}",
      "path": "/components/mvpblocks/creative/bubble-board.tsx",
      "target": "components/mvpblocks/bubble-board.tsx"
    }
  ]
}