{
  "name": "bubble-board",
  "author": "ecolash",
  "type": "registry:block",
  "description": "Draggable bubble grid with smooth Framer Motion animations",
  "dependencies": [
    "framer-motion"
  ],
  "registryDependencies": [],
  "files": [
    {
      "type": "registry:block",
      "content": "\"use client\"\n\nimport { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { motion, useMotionValue, transform } from \"framer-motion\"\n\nconst ICON_CONFIG = {\n  margin: 20,\n  size: 100,\n}\n\nconst CONTAINER_CONFIG = {\n  width: 420,\n  height: 420,\n}\n\nconst GRID_SIZE = 10\nconst COLS = 12\n\nfunction useIconTransform({ x, y, scale, planeX, planeY, xOffset, yOffset, }: {\n  x: any\n  y: any\n  scale: any\n  planeX: any\n  planeY: any\n  xOffset: number\n  yOffset: number\n}) {\n  const xScale = useRef(1)\n  const yScale = useRef(1)\n  const createScreenRange = (axis: \"width\" | \"height\") => [\n    -60,\n    80,\n    CONTAINER_CONFIG[axis] - (ICON_CONFIG.size + ICON_CONFIG.margin) / 2 - 80,\n    CONTAINER_CONFIG[axis] - (ICON_CONFIG.size + ICON_CONFIG.margin) / 2 + 60,\n  ]\n\n  const xRange = createScreenRange(\"width\")\n  const yRange = createScreenRange(\"height\")\n\n  const mapScreenToXOffset = transform(xRange, [50, 0, 0, -50])\n  const mapScreenToYOffset = transform(yRange, [50, 0, 0, -50])\n  const mapScreenXToScale = transform(xRange, [0, 1, 1, 0])\n  const mapScreenYToScale = transform(yRange, [0, 1, 1, 0])\n\n  const updateScale = useCallback(() => {\n    const newScale = Math.min(xScale.current, yScale.current)\n    scale.set(newScale)\n  }, [scale])\n\n  useEffect(() => {\n    return planeX.onChange((v: number) => {\n      const screen = v + xOffset + 20\n      xScale.current = mapScreenXToScale(screen)\n\n      x.set(mapScreenToXOffset(screen))\n      updateScale()\n    })\n  }, [planeX, x, scale, xOffset, mapScreenXToScale, mapScreenToXOffset, updateScale])\n\n  useEffect(() => {\n    return planeY.onChange((v: number) => {\n      const screen = v + yOffset + 20\n      yScale.current = mapScreenYToScale(screen)\n\n      y.set(mapScreenToYOffset(screen))\n      updateScale()\n    })\n  }, [planeY, y, scale, yOffset, mapScreenYToScale, mapScreenToYOffset, updateScale])\n}\n\nfunction BubbleItem({ row, col, planeX, planeY, colorIndex, }: {\n  row: number\n  col: number\n  planeX: any\n  planeY: any\n  colorIndex: number\n}) {\n  const x = useMotionValue(0)\n  const y = useMotionValue(0)\n  const scale = useMotionValue(1)\n\n  const length = ICON_CONFIG.size + ICON_CONFIG.margin\n  const xOffset = col * length + (row % 2) * (length / 2)\n  const yOffset = row * ICON_CONFIG.size\n\n  useIconTransform({ x, y, scale, planeX, planeY, xOffset, yOffset })\n\n  const colors = [\"bg-chart-1\", \"bg-chart-2\", \"bg-chart-3\", \"bg-chart-4\", \"bg-chart-5\"]\n  const colorClass = colors[colorIndex % colors.length]\n  return (\n    <motion.div\n      style={{\n        position: \"absolute\",\n        left: xOffset,\n        top: yOffset,\n        x,\n        y,\n        scale,\n        width: ICON_CONFIG.size,\n        height: ICON_CONFIG.size,\n      }}\n      className={`rounded-full ${colorClass} shadow-lg`}\n    />\n  )\n}\n\nexport default function BubbleBoard() {\n  const GRID_SIZE_PX = 1000;\n  const DEVICE_SIZE = CONTAINER_CONFIG.width;\n\n  const initialOffset = -(GRID_SIZE_PX - DEVICE_SIZE) / 2;\n  const x = useMotionValue(initialOffset);\n  const y = useMotionValue(initialOffset);\n\n  const grid = useMemo(() => {\n    return new Array(GRID_SIZE).fill(null).map((_, i) => new Array(COLS).fill(null).map((_, j) => j))\n  }, [])\n\n  return (\n      <div\n        className=\"relative overflow-hidden rounded-3xl border-4 border-foreground bg-cover bg-center\"\n        style={{\n          width: CONTAINER_CONFIG.width,\n          height: CONTAINER_CONFIG.height,\n          backgroundImage: 'url(\"https://api.svgl.app/svg/google.svg\")',\n          backgroundSize: \"cover\",\n          backgroundPosition: \"center\",\n          boxShadow: \"inset 0 0 75px 75px rgb(--bg-muted/80%)\",\n        }}\n      >\n        <motion.div\n          drag\n          dragConstraints={{\n            left: -650,\n            right: 50,\n            top: -600,\n            bottom: 50,\n          }}\n          style={{\n            width: 1000,\n            height: 1000,\n            x,\n            y,\n            background: \"transparent\",\n          }}\n          className=\"cursor-grab active:cursor-grabbing\"\n        >\n          {grid.map((rows, rowIndex) =>\n            rows.map((colIndex) => (\n              <BubbleItem\n                key={`${rowIndex}-${colIndex}`}\n                row={rowIndex}\n                col={colIndex}\n                planeX={x}\n                planeY={y}\n                colorIndex={rowIndex * COLS + colIndex}\n              />\n            )),\n          )}\n        </motion.div>\n      </div>\n  )\n}\n",
      "path": "/components/mvpblocks/creative/bubble-board.tsx",
      "target": "components/mvpblocks/bubble-board.tsx"
    }
  ]
}