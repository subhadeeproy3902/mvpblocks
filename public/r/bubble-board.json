{
  "name": "bubble-board",
  "author": "ecolash",
  "type": "registry:block",
  "description": "Draggable bubble grid with smooth Framer Motion animations",
  "dependencies": [
    "framer-motion"
  ],
  "registryDependencies": [],
  "files": [
    {
      "type": "registry:block",
      "content": "\"use client\"\n\nimport { useMemo, useRef } from \"react\"\nimport { motion, useMotionValue, transform } from \"framer-motion\"\n\nconst ICON_CONFIG = {\n  margin: 20,\n  size: 100,\n}\n\nconst DEVICE_CONFIG = {\n  width: 368,\n  height: 448,\n}\n\nconst GRID_SIZE = 10\nconst COLS = 8\n\nfunction useIconTransform({ x, y, scale, planeX, planeY, xOffset, yOffset, }: {\n  x: any\n  y: any\n  scale: any\n  planeX: any\n  planeY: any\n  xOffset: number\n  yOffset: number\n}) {\n  const xScale = useRef(1)\n  const yScale = useRef(1)\n\n  const createScreenRange = (axis: \"width\" | \"height\") => [\n    -60,\n    80,\n    DEVICE_CONFIG[axis] - (ICON_CONFIG.size + ICON_CONFIG.margin) / 2 - 80,\n    DEVICE_CONFIG[axis] - (ICON_CONFIG.size + ICON_CONFIG.margin) / 2 + 60,\n  ]\n\n  const scaleRange = [0, 1, 1, 0]\n  const xRange = createScreenRange(\"width\")\n  const yRange = createScreenRange(\"height\")\n  const mapScreenToXOffset = transform(xRange, [50, 0, 0, -50])\n  const mapScreenToYOffset = transform(yRange, [50, 0, 0, -50])\n  const mapScreenXToScale = transform(xRange, scaleRange)\n  const mapScreenYToScale = transform(yRange, scaleRange)\n\n  useMemo(() => {\n    const handleTransform = (v: number) => {\n      const screenOffset = v + xOffset + 20\n      xScale.current = mapScreenXToScale(screenOffset)\n      const newScale = Math.min(xScale.current, yScale.current)\n      scale.set(newScale)\n      x.set(mapScreenToXOffset(screenOffset))\n    }\n    return planeX.onRenderRequest(handleTransform)\n  }, [planeX, scale, x, xOffset, mapScreenToXOffset, mapScreenXToScale])\n\n  useMemo(() => {\n    const handleTransform = (v: number) => {\n      const screenOffset = v + yOffset + 20\n      yScale.current = mapScreenYToScale(screenOffset)\n      const newScale = Math.min(xScale.current, yScale.current)\n      scale.set(newScale)\n      y.set(mapScreenToYOffset(screenOffset))\n    }\n    return planeY.onRenderRequest(handleTransform)\n  }, [planeY, scale, y, yOffset, mapScreenToYOffset, mapScreenYToScale])\n}\n\nfunction BubbleItem({ row, col, planeX, planeY, colorIndex, }: {\n  row: number\n  col: number\n  planeX: any\n  planeY: any\n  colorIndex: number\n}) {\n  const x = useMotionValue(0)\n  const y = useMotionValue(0)\n  const scale = useMotionValue(1)\n\n  const xOffset =\n    col * (ICON_CONFIG.size + ICON_CONFIG.margin) + (row % 2) * ((ICON_CONFIG.size + ICON_CONFIG.margin) / 2)\n  const yOffset = row * ICON_CONFIG.size\n\n  useIconTransform({ x, y, scale, planeX, planeY, xOffset, yOffset })\n\n  // Color palette using design tokens\n  const colors = [\"bg-chart-1\", \"bg-chart-2\", \"bg-chart-3\", \"bg-chart-4\", \"bg-chart-5\"]\n  const colorClass = colors[colorIndex % colors.length]\n\n  return (\n    <motion.div\n      style={{\n        position: \"absolute\",\n        left: xOffset,\n        top: yOffset,\n        x,\n        y,\n        scale,\n        width: ICON_CONFIG.size,\n        height: ICON_CONFIG.size,\n      }}\n      className={`rounded-full ${colorClass} shadow-lg`}\n    />\n  )\n}\n\nexport default function BubbleBoard() {\n  const x = useMotionValue(-225)\n  const y = useMotionValue(-225)\n\n  const grid = useMemo(() => {\n    return new Array(GRID_SIZE).fill(null).map((_, i) => new Array(COLS).fill(null).map((_, j) => j))\n  }, [])\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-background\">\n      <div\n        className=\"relative overflow-hidden rounded-3xl bg-primary shadow-2xl\"\n        style={{\n          width: DEVICE_CONFIG.width,\n          height: DEVICE_CONFIG.height,\n        }}\n      >\n        <motion.div\n          drag\n          dragConstraints={{\n            left: -650,\n            right: 50,\n            top: -600,\n            bottom: 50,\n          }}\n          style={{\n            width: 1000,\n            height: 1000,\n            x,\n            y,\n            background: \"transparent\",\n          }}\n          className=\"cursor-grab active:cursor-grabbing\"\n        >\n          {grid.map((rows, rowIndex) =>\n            rows.map((colIndex) => (\n              <BubbleItem\n                key={`${rowIndex}-${colIndex}`}\n                row={rowIndex}\n                col={colIndex}\n                planeX={x}\n                planeY={y}\n                colorIndex={rowIndex * COLS + colIndex}\n              />\n            )),\n          )}\n        </motion.div>\n      </div>\n    </div>\n  )\n}\n",
      "path": "/components/mvpblocks/creative/bubble-board.tsx",
      "target": "components/mvpblocks/bubble-board.tsx"
    }
  ]
}